name: Release Reminder

on:
  release:
    types: [published]

jobs:
  remind:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
    steps:
      - name: Post reminder comment
        uses: actions/github-script@f28e40c7f34bde8b3046d885e986cb6290c5673b # v7.1.0
        with:
          script: |
            const release = context.payload.release;
            const comment = `## üì¶ Manual npm Publish Reminder
            
            A new release **${release.tag_name}** has been published on GitHub!
            
            ### Next Steps:
            
            1. **Pull the latest code:**
               \`\`\`bash
               git checkout main
               git pull
               git fetch --tags
               \`\`\`
            
            2. **Verify everything is ready:**
               \`\`\`bash
               npm run check
               npm run build
               \`\`\`
            
            3. **Publish to npm:**
               \`\`\`bash
               npm login  # if not already logged in
               npm publish
               \`\`\`
            
            4. **Verify publication:**
               \`\`\`bash
               npm view design-constraint-validator
               \`\`\`
            
            üìù See [RELEASE.md](https://github.com/${context.repo.owner}/${context.repo.repo}/blob/main/RELEASE.md) for detailed instructions.
            
            ---
            *This is an automated reminder. Automated npm publishing is disabled.*`;
            
            // Post as release comment
            await github.rest.repos.createReleaseComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              release_id: release.id,
              body: comment
            });
