<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1" />
		<title>Larissa Configurator (Advanced)</title>
		<link rel="stylesheet" href="../dist/tokens.css" />
		<style>
			:root { font-family: var(--typography-font-sans); }
			body { margin:0; display:grid; grid-template-columns: 320px 1fr; min-height:100vh; background: var(--color-role-bg-surface); color: var(--color-role-text-default); }
			aside { padding: var(--size-spacing-6) var(--size-spacing-4); display:grid; gap: var(--size-spacing-6); align-content:start; border-right: var(--size-border-1) solid color-mix(in oklch,var(--color-role-text-default) 15%, transparent); background: var(--color-role-bg-elevated, var(--color-palette-gray-50)); }
			main { padding: var(--size-spacing-6); display:grid; gap: var(--size-spacing-6); }
			h1 { margin:0; font: var(--typography-weight-semibold) 1.75rem/var(--typography-lineheight-tight) var(--typography-font-sans); }
			fieldset { border: var(--size-border-1) solid color-mix(in oklch,var(--color-role-text-default) 18%, transparent); border-radius: var(--size-radius-md); display:grid; gap: var(--size-spacing-3); padding: var(--size-spacing-4); }
			legend { font: var(--typography-weight-medium) var(--typography-size-sm)/var(--typography-lineheight-tight) var(--typography-font-sans); letter-spacing:.05em; text-transform:uppercase; }
			label { display:grid; gap: var(--size-spacing-2); font-size:.65rem; font-weight: var(--typography-weight-medium); letter-spacing:.05em; text-transform:uppercase; }
			input[type=text] { font: var(--typography-weight-regular) var(--typography-size-base)/var(--typography-lineheight-tight) var(--typography-font-sans); padding: var(--size-spacing-2) var(--size-spacing-3); border: var(--size-border-1) solid color-mix(in oklch,var(--color-role-text-default) 25%,transparent); border-radius: var(--size-radius-md); background: var(--color-role-bg-surface); }
			button { font: var(--typography-weight-medium) var(--typography-size-sm)/var(--typography-lineheight-tight) var(--typography-font-sans); padding: var(--size-spacing-2-5) var(--size-spacing-4); border:none; border-radius: var(--size-radius-md); cursor:pointer; background: var(--color-role-accent-default); color: var(--color-role-on-accent); }
			button.secondary { background: color-mix(in oklch,var(--color-role-accent-default) 20%, transparent); color: var(--color-role-accent-default); }
			table { width:100%; border-collapse:collapse; font-size:.65rem; }
			th,td { padding: var(--size-spacing-2); text-align:left; border-bottom: var(--size-border-1) solid color-mix(in oklch,var(--color-role-text-default) 15%, transparent); }
			th { font-weight: var(--typography-weight-medium); letter-spacing:.06em; text-transform:uppercase; opacity:.7; }
			code { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
			.pill { display:inline-block; padding: var(--size-spacing-2) var(--size-spacing-3); background: color-mix(in oklch,var(--color-role-accent-default) 15%, transparent); color: var(--color-role-accent-default); border-radius: 999px; font-size:.55rem; font-weight: var(--typography-weight-medium); letter-spacing:.08em; text-transform:uppercase; }
			.preview h2 { margin:0 0 var(--size-spacing-2); font: var(--typography-weight-semibold) 1.4rem/var(--typography-lineheight-tight) var(--typography-font-sans); }
			.preview p { margin:0 0 var(--size-spacing-4); max-width:62ch; color: var(--color-role-text-muted); }
		</style>
	</head>
	<body>
		<aside>
			<h1>Configurator</h1>
			<p style="margin: var(--size-spacing-2) 0 0; font-size: var(--typography-size-sm);">Batch & export override operations (array-of-ops) for CLI ingestion. All styling = token vars.</p>
			<form id="advForm" style="display:grid; gap: var(--size-spacing-6);">
				<fieldset>
					<legend>Override</legend>
						<label>Token ID <input name="id" placeholder="color-role-accent-default" required /></label>
						<label>Value <input name="value" placeholder="oklch(0.58 0.20 250)" required /></label>
						<div style="display:flex; gap: var(--size-spacing-3); flex-wrap:wrap;">
							<button type="submit">Add / Update</button>
							<button type="button" data-action="remove" class="secondary">Remove</button>
						</div>
				</fieldset>
				<fieldset>
					<legend>Export</legend>
					<button type="button" id="exportJson">Copy JSON</button>
					<p style="margin: var(--size-spacing-2) 0 0; font-size:.55rem; line-height:1.3;">Paste into: <code>larissa set --json - --write</code></p>
				</fieldset>
			</form>
			<section style="display:grid; gap: var(--size-spacing-3);">
				<h2 style="margin:0; font: var(--typography-weight-medium) .9rem/var(--typography-lineheight-tight) var(--typography-font-sans); letter-spacing:.05em; text-transform:uppercase;">Active Overrides <span id="ovCount" class="pill">0</span></h2>
				<table aria-label="overrides table"><thead><tr><th>ID</th><th>Value</th><th>CSS Var</th></tr></thead><tbody id="advBody"><tr><td colspan="3" style="padding: var(--size-spacing-3); opacity:.55;">None</td></tr></tbody></table>
			</section>
		</aside>
		<main>
			<section class="preview">
				<h2 id="h2Sample">Heading Preview</h2>
				<p id="bodySample">Sample paragraph using token driven values. Adjust overrides (e.g. semantic role color / base size) for rapid iteration prior to persisting.</p>
				<button style="justify-self:start;">Primary Action</button>
			</section>
			<section>
				<h2 style="margin:0 0 var(--size-spacing-3); font: var(--typography-weight-medium) .9rem/var(--typography-lineheight-tight) var(--typography-font-sans); letter-spacing:.05em; text-transform:uppercase;">Export Output</h2>
				<pre id="exportOut" style="margin:0; background: color-mix(in oklch,var(--color-role-text-default) 6%, transparent); padding: var(--size-spacing-4); border-radius: var(--size-radius-md); font-size:.6rem; max-height:18rem; overflow:auto;">[]</pre>
			</section>
		</main>
		<script>
			const root=document.documentElement; const advForm=document.getElementById('advForm'); const bodyEl=document.getElementById('advBody'); const count=document.getElementById('ovCount'); const exportOut=document.getElementById('exportOut');
			const overrides=new Map();
			function cssVar(id){ return '--'+id.replace(/\./g,'-'); }
			function render(){ bodyEl.innerHTML=''; if(!overrides.size){ bodyEl.innerHTML='<tr><td colspan="3" style="padding: var(--size-spacing-3); opacity:.55;">None</td></tr>'; }
				overrides.forEach((v,id)=>{ const tr=document.createElement('tr'); tr.innerHTML=`<td><code>${id}</code></td><td><code>${v}</code></td><td><code>${cssVar(id)}</code></td>`; bodyEl.appendChild(tr); });
				count.textContent=overrides.size; exportOut.textContent=JSON.stringify([...overrides.entries()].map(([id,value])=>({id,$value:value})), null, 2); }
			advForm.addEventListener('submit', e=>{ e.preventDefault(); const id=advForm.id.value.trim(); const value=advForm.value.value.trim(); if(!id||!value) return; overrides.set(id,value); root.style.setProperty(cssVar(id), value); render(); });
			advForm.querySelector('[data-action="remove"]').addEventListener('click',()=>{ const id=advForm.id.value.trim(); if(!id) return; overrides.delete(id); root.style.removeProperty(cssVar(id)); render(); });
			document.getElementById('exportJson').addEventListener('click',()=>{ navigator.clipboard.writeText(exportOut.textContent).catch(()=>{}); });
			render();
		</script>
	</body>
</html>
